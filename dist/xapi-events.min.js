!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.xapiEvents=t()}}(function(){return function t(e,n,i){function s(o,r){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!r&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var v=n[o]={exports:{}};e[o][0].call(v.exports,function(t){var n=e[o][1][t];return s(n?n:t)},v,v.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=void 0;i={debug:!1},n.default=i},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Object.freeze({ON:"ON",OFF:"OFF",DISABLED:"DISABLED"});n.EventStatus=i},{}],3:[function(t,e,n){"use strict";function i(t){return this.log("validateEvent",{e:t}),this.errors=[],s.call(this,t),a.call(this,t),o.call(this,t),r.call(this,t),l.call(this,t),this.errors.length?this.log(g,{e:t,errors:this.errors}):this.log(m),this}function s(t){return this.log("_mustHaveId",{e:t}),!!t.id||(this.errors.push(c),!1)}function a(t){return this.log("_mustHaveUniqueId",{e:t}),!this.events.length&&!this.events.filter(function(e){return e.id===t.id}).length||(this.errors.push(f),!1)}function o(t){return this.log("_mustHaveName",{e:t}),!!t.name||(this.errors.push(c),!1)}function r(t){return this.log("_mustHaveStatus",{e:t}),!(!t.status||!u.call(this,t))||(this.errors.push(h),!1)}function u(t){return this.log("isValidStatus",{e:t}),t.status===v.EventStatus.ON||t.status===v.EventStatus.OFF||t.status===v.EventStatus.DISABLED}function l(t){return this.log("_mustHaveCallbackFunction",{e:t}),!(!t&&Object.prototype.toString.call(t.callback)!==d)||(this.errors.push(E),!1)}Object.defineProperty(n,"__esModule",{value:!0}),n.xapiEventValidator=void 0;var v=t("./event-status"),d="[object Function]",c="Must have an id",f="Must have a unique id",h="Must have a status",E="Must have a correct callback function",g="Not valid event:",m="Valid event",p=void 0;n.xapiEventValidator=p={isValidEvent:function(t){return this.log("isValidEvent",{e:t}),!i.call(this,t).errors.length}},n.xapiEventValidator=p},{"./event-status":2}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.xapiEvent=void 0;var i=t("./event-status"),s=void 0;n.xapiEvent=s={id:void 0,callback:void 0,name:void 0,elementSelectors:[],targetElements:[],statement:void 0,status:i.EventStatus.DISABLED,isValid:!1,statementProperties:[]},n.xapiEvent=s},{"./event-status":2}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=void 0;n.xapiHelpers=i={getSelection:function(){return window.getSelection().toString()}},n.xapiHelpers=i},{}],6:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=t("../config"),a=i(s),o=void 0;o={debug:a.default.debug,log:function(){if(!a.default.debug)return!1;try{var t;return(t=console).log.apply(t,arguments),!0}catch(t){return!1}}},n.default=o},{"../config":1}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=void 0;i={registration:void 0,instructor:void 0,team:void 0,contextActivities:void 0,revision:void 0,platform:void 0,language:void 0,statement:void 0,extensions:void 0},n.default=i},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=void 0;i={actor:void 0,verb:void 0,object:void 0,result:void 0,context:void 0,timestamp:void 0,stored:void 0,authority:void 0,version:void 0,attachments:void 0},n.default=i},{}],9:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=void 0;return this.log("_buildBaseStatement",{actor:t,authority:e}),n=o.call(this,t),Object.assign(this.baseStatement,d.default,{actor:t,context:n,authority:e})}function a(){var t=void 0;return this.log("_buildBaseStatementConfig"),t=this.baseStatement,{baseStatement:t,platform:navigator?navigator.userAgent:null,language:navigator?navigator.language:null}}function o(t){var e=void 0;return this.log("_getStatementConfigStructure",{actor:t}),e=t||null,Object.assign(f.default,{instructor:e})}function r(t){return this.log("_isEnabled",t.status),t.status===h.EventStatus.ON}Object.defineProperty(n,"__esModule",{value:!0}),n.xapiEvents=void 0;var u=t("./utils/logger"),l=i(u),v=t("./xapi/statement"),d=i(v),c=t("./xapi/statement-context"),f=i(c),h=t("./events/event-status"),E=t("./events/xapi-event-validator"),g=t("./events/xapi-event"),m=t("./events/xapi-helpers");n.xapiEvents={log:l.default.log,baseStatement:{},events:[],errors:[],targetElements:[],LRS:{},helpers:m.xapiHelpers,init:function(t,e){return this.log("init"),this.setBaseStatement(t,e)},reset:function(){return this.log("reset"),this.setBaseStatement(this.baseStatement.author,this.baseStatement.authority)},getTargetElements:function(){var t=this;this.log("getTargetElements"),this.events.forEach(function(e){e.elementSelectors.forEach(function(e){t.log("elementSelector",e);var n=document.querySelectorAll(e);n.length&&n.forEach(function(e){t.log("elements",e),t.targetElements.push(e)})})})},setBaseStatement:function(t,e){return this.log("setBaseStatement"),!(!t||!e)&&s.call(this,t,e)},setStatementConfigInfo:function(){return this.log("setStatementConfigInfo"),!!this.baseStatement&&a.call(this)},listenEnabledEvents:function(){var t=this;this.log("listenEnabledEvents"),this.events.forEach(function(e){t.log("xapiEvent",e),r.call(t,e)&&t.targetElements.forEach(function(n){t.log("targetElement",n),n.addEventListener(e.name,function(n){e.callback.call(t,n,e)},!1)})})},stopEnabledEvents:function(){var t=this;this.log("stopEnabledEvents"),this.events.forEach(function(e){r.call(t,e)&&t.targetElements.forEach(function(t){t.removeEventListener(e.name)})})},addEvent:function(t){return this.log("addEvent",{eventObj:t}),!!this.isValidEvent(t)&&(t=Object.assign(g.xapiEvent,t),this.events.push(t),!0)},addEvents:function(t){var e=this;this.log("addEvents",{events:t}),t.forEach(function(t){e.addEvent(t)}),this.getTargetElements()},removeEventById:function(t){this.log("removeEventById",{eventId:t}),this.events=this.events.filter(function(e){return e.id!==t})},removeEventsByElementId:function(t){this.log("removeEventsByElementId",{elementId:t}),this.events=this.events.filter(function(e){return e.elementId!==t})},enableEvent:function(t){this.log("enableEvent",{_event:t}),this.events.forEach(function(e){if(t.id===e.id)return void(e.status=h.EventStatus.ON)})},enableAllEvents:function(){this.log("enableAllEvents"),this.events.forEach(function(t){t.status=h.EventStatus.ON})},enableEventById:function(t){this.log("enableEventById"),this.events.forEach(function(e){if(t===e.id)return void(e.status=h.EventStatus.ON)})},enableElementsByElementId:function(t){this.log("enableElementsByElementId",{elementId:t}),this.events.forEach(function(e){t===e.elementId&&(e.status=h.EventStatus.ON)})},disableEvent:function(t){this.log("disableEvent",{_event:t}),this.events.forEach(function(e){if(t.id===e.id)return void(e.status=h.EventStatus.OFF)})},disableAllEvents:function(){this.log("disableAllEvents"),this.events.forEach(function(t){t.status=h.EventStatus.OFF})},disableEventById:function(t){this.log("disableEventById",{eventId:t}),this.events.forEach(function(e){if(t===e.id)return void(e.status=h.EventStatus.OFF)})},disableElementsByElementId:function(t){this.log("disableElementsByElementId",{elementId:t}),this.events.forEach(function(e){t===e.elementId&&(e.status=h.EventStatus.OFF)})},isValidEvent:function(t){return this.log("isValidEvent",{_event:t}),E.xapiEventValidator.isValidEvent.call(this,t)}}},{"./events/event-status":2,"./events/xapi-event":4,"./events/xapi-event-validator":3,"./events/xapi-helpers":5,"./utils/logger":6,"./xapi/statement":8,"./xapi/statement-context":7}]},{},[9])(9)});
//# sourceMappingURL=maps/xapi-events.min.js.map
